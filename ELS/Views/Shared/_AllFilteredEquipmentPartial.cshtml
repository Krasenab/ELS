@model List<AllEquipmentViewModel>

<div class="mx-auto max-w-screen-2xl px-4 sm:px-6 lg:px-8">
    <div id="equipmentList" class="grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(280px,1fr))]">
        @foreach (var item in Model)
        {
            var status = (item.CurrentStatus ?? "").ToLowerInvariant();
            var (badgeBg, badgeText, dot) = status switch
            {
                "available" or "operational" => ("bg-emerald-50", "text-emerald-700", "bg-emerald-500"),
                "in use" => ("bg-amber-50", "text-amber-700", "bg-amber-500"),
                "maintenance" => ("bg-sky-50", "text-sky-700", "bg-sky-500"),
                "retired" or "offline" => ("bg-slate-100", "text-slate-700", "bg-slate-400"),
                _ => ("bg-slate-100", "text-slate-700", "bg-slate-400")
            };

            <article class="group rounded-2xl bg-white/95 ring-1 ring-slate-200 shadow-sm hover:shadow-md transition p-5 flex flex-col h-full">
                <!-- Header -->
                <div class="flex items-start gap-3">
                    <div class="h-10 w-10 rounded-xl bg-sky-50 ring-1 ring-sky-100 flex items-center justify-center">
                        <i class="fas fa-box-open text-sky-600 text-lg"></i>
                    </div>

                    <div class="min-w-0 flex-1">
                        <div class="flex items-start gap-2">
                            <h3 class="text-base font-semibold text-slate-900 leading-tight truncate">
                                @item.EquipmentName
                            </h3>
                            <span class="ml-auto inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-[11px] font-semibold @badgeBg @badgeText shrink-0">
                                <span class="h-2 w-2 rounded-full @dot"></span>
                                @item.CurrentStatus
                            </span>
                        </div>
                        <p class="text-xs text-slate-500 truncate">Category: @item.Category</p>
                    </div>
                </div>

                <!-- Body -->
                <div class="mt-4 space-y-1.5">
                    <p class="text-sm text-slate-600 truncate">Serial number: @item.SerialNumber</p>
                    <p class="text-sm text-slate-700 line-clamp-2">Description: @item.Description</p>
                </div>

                <!-- Footer pinned to bottom -->
                <div class="mt-auto pt-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
                    <span class="flex items-center text-xs text-slate-600 min-w-0">
                        <i class="fas fa-map-marker-alt mr-1 text-sky-500"></i>
                        <span class="truncate">Location: @(string.IsNullOrWhiteSpace(item.Location) ? "—" : item.Location)</span>
                    </span>

                    <!-- Buttons: full-width on mobile, inline on >=sm -->
                    <div class="grid grid-cols-2 gap-2 sm:flex sm:gap-2 sm:w-auto w-full">
                        <a asp-controller="Ticket" asp-action="Create" asp-route-equipmentId="@item.Id"
                           class="inline-flex justify-center items-center gap-1.5 rounded-full bg-sky-600 text-white h-9 px-4 text-sm font-semibold shadow hover:bg-sky-700 transition">
                            <i class="fas fa-ticket-alt"></i> Open Ticket
                        </a>
                        <a asp-controller="Equipment" asp-action="Details" asp-route-id="@item.Id"
                           class="inline-flex justify-center items-center gap-1.5 rounded-full bg-white text-slate-900 ring-1 ring-slate-300 h-9 px-4 text-sm font-semibold hover:bg-slate-50 transition">
                            <i class="fas fa-arrow-right"></i> View
                        </a>
                    </div>
                </div>
            </article>
        }

        @if (!Model.Any())
        {
            <p class="col-span-full text-center text-slate-500">No equipment found.</p>
        }
    </div>
</div>
