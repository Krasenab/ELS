<div class="flex-grow font-sans antialiased bg-gray-50 pt-12 pb-24">

    <!-- Header & Search -->
    <section class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mb-12">
        <!-- Decorative blob -->
        <div class="absolute -top-20 -left-20 w-64 h-64 bg-sky-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30"></div>
        <div class="relative bg-white rounded-3xl shadow-2xl p-8 md:p-10 flex flex-col md:flex-row items-center gap-6 z-10">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 flex-1">
                <i class="fas fa-layer-group text-sky-600 mr-2"></i>
                Всичко оборудване
            </h1>
            <div class="flex-1 flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto">
                <div class="relative w-full sm:w-64">
                    <input id="search" type="search" placeholder="Търси оборудване..."
                           class="w-full pl-10 pr-4 py-3 bg-gray-100 rounded-full border border-gray-200
                        focus:outline-none focus:ring-2 focus:ring-sky-300 transition" />
                    <span class="absolute inset-y-0 left-3 flex items-center text-gray-400">
                        <i class="fas fa-search"></i>
                    </span>
                </div>
                <div class="relative w-full sm:w-48">
                    <select id="statusFilter"
                            class="w-full pl-4 pr-8 py-3 bg-gray-100 rounded-full border border-gray-200
                         focus:outline-none focus:ring-2 focus:ring-sky-300 transition">
                        <option value="">Всички статуси</option>
                        <option value="available">Налично</option>
                        <option value="in use">В употреба</option>
                    </select>
                    <span class="absolute inset-y-0 right-3 flex items-center text-gray-400 pointer-events-none">
                        <i class="fas fa-chevron-down"></i>
                    </span>
                </div>
            </div>
        </div>
    </section>

    <!-- Equipment Grid -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div id="equipmentList"
             class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
            @foreach (var item in Model)
            {
                var status = item.IsAvailable ? "available" : "in use";
                <div class="group relative bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition">
                    <!-- Image -->
                    <div class="h-48 w-full bg-gray-100 flex items-center justify-center overflow-hidden">
                        <img src="@item.ImageUrl" alt="@item.Name" class="object-cover h-full w-full" />
                    </div>
                    <!-- Content -->
                    <div class="p-4 space-y-2">
                        <h2 class="text-lg font-semibold text-gray-900 truncate">@item.Name</h2>
                        <p class="text-sm text-gray-600 flex items-center">
                            <i class="fas fa-map-marker-alt text-sky-500 mr-2"></i>
                            @item.Location
                        </p>
                        <div class="flex items-center justify-between">
                            <span class="inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full
                           @(item.IsAvailable
                                ? "bg-green-100 text-green-800"
                                : "bg-red-100 text-red-800")">
                                <i class="fas @(item.IsAvailable ? "fa-check-circle text-green-600" : "fa-times-circle text-red-600") mr-1"></i>
                                @(item.IsAvailable ? "Налично" : "В употреба")
                            </span>
                            <a asp-controller="Equipment" asp-action="Details" asp-route-id="@item.Id"
                               class="opacity-0 group-hover:opacity-100 inline-flex items-center text-sky-600 hover:text-sky-700">
                                <i class="fas fa-arrow-right mr-1"></i> Детайли
                            </a>
                        </div>
                    </div>
                </div>
            }
            @if (!Model.Any())
            {
                <p class="col-span-full text-center text-gray-500 py-12">Няма намерено оборудване.</p>
            }
        </div>
    </section>

</div>

@section Scripts {
    <script>
        const cards = [...document.querySelectorAll('#equipmentList > div')];
        document.getElementById('search').addEventListener('input', filter);
        document.getElementById('statusFilter').addEventListener('change', filter);

        function filter() {
          const q = document.getElementById('search').value.trim().toLowerCase();
          const status = document.getElementById('statusFilter').value;
          cards.forEach(card => {
            const name = card.querySelector('h2').innerText.toLowerCase();
            const stat = card.dataset.status;
            const show = name.includes(q) && (!status || stat === status);
            card.style.display = show ? '' : 'none';
          });
        }
    </script>
}
